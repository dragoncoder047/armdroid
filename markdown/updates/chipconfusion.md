Title: Chip Confusion
Date: 2022-09-12
Series: testing
Modified: 2022-09-23

Today I revisited why the conveyor belt's board couldn't drive the other motors. Instead of relying on the obviously-not-working board from the conveyor belt, I pried the chip with the heatsink from its socket and plugged it into a breadboard. Here's the circuit diagram I used:

```kroki
+-----------+
|   MOTOR   |
|   PLUG    |
| A B C D + |
|           |
+-+-+-+-+-+-+
  | | | | |
  | | | |  '----*-------.
  | | | |       |        |
  | | | | | | | |        |
+-+-+-+-+-+-+-+-+-+      |
| A B C D E F G X |      |
)     chip        |      |
| 1 2 3 4 5 6 7 G |      |
+-+-+-+-+-+-+-+-+-+      |
  | | | | | | | |        |
  | | | |       |        |
  o o o o      GND       *-----o +12V
                         |
      \                  |
      |     .---------.  |
       '----+ 330 ohm +-'
            '---------'
```

I manually touched the loose end of wire coming out of the resistor to the four terminals of the driver chip in turn, to make the motor rotate.

Unfortunately, this didn't work!

At least, now I knew that the specifics of this chip and/or how the motor was wired were why it only worked with one motor (the one it was originally wired to run).

I dug out the circuit board of the Armdroid itself and had a look at how it was wired. On a hunch that one of the individual drivers in the conveyor's chip were faulty, I replaced the one on the breadboard with a confirmed UL2003A from the Armdroid board.

And this is when I noticed a subtle but important difference.

Having a look at the side of the two chips (where the pins come out) I noticed that on the unknown chip from the conveyor's board, the middle two pins were joined, but on the confirmed ULN2003A they were not:

ULN2003A (with heatsink):

```kroki
.-. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-. 
| | | | | | | | | | | | | | | | | | | | | | | | | |
| | | | | | | | | | | | | | | | | | | | | | | | | | 
| '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' |
+-------------------------------------------------+
|                                                 |
|  +--+ +---+ +---+ +---+ +---+ +---+ +---+ +--+  |
|  |  | |   | |   | |   | |   | |   | |   | |  |  |
+--|  |-|   |-|   |-|   |-|   |-|   |-|   |-|  |--+
   |  | |   | |   | |   | |   | |   | |   | |  | 
   |  | |   | |   | |   | |   | |   | |   | |  | 
   | /   \ /   \ /   \ /   \ /   \ /   \ /   \ |  
   | |   | |   | |   | |   | |   | |   | |   | |  
   | |   | |   | |   | |   | |   | |   | |   | |  
   | |   | |   | |   | |   | |   | |   | |   | |  
   +-+   +-+   +-+   +-+   +-+   +-+   +-+   +-+  
```

Unknown chip:

```kroki
.-. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-. 
| | | | | | | | | | | | | | | | | | | | | | | | | |
| | | | | | | | | | | | | | | | | | | | | | | | | | 
| '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' |
+-------------------------------------------------+
|                                                 |
|  +--+ +---+ +---+ +---------+ +---+ +---+ +--+  |
|  |  | |   | |   | |   +-+   | |   | |   | |  |  |
+--|  |-|   |-|   |-|   |-|   |-|   |-|   |-|  |--+
   |  | |   | |   | |   | |   | |   | |   | |  | 
   |  | |   | |   | |   | |   | |   | |   | |  | 
   | /   \ /   \ /   \ /   \ /   \ /   \ /   \ |  
   | |   | |   | |   | |   | |   | |   | |   | |  
   | |   | |   | |   | |   | |   | |   | |   | |  
   | |   | |   | |   | |   | |   | |   | |   | |  
   +-+   +-+   +-+   +-+   +-+   +-+   +-+   +-+  
```

Obviously, now, the chip on the conveyor board is *not* a ULN2003A! I na&iuml;vely assumed that it was the same, and I was wrong.

My guess is that the unknown chip is an ~~[L6220](/armdroid/info/resources/resources/datasheets/L6220-darlington-switches.pdf), which conveniently contains two inverted and two uninverted outputs, perfect for driving a unipolar stepper motor with two quadrature signals (which are easily generated by two D-flip-flops wired into each other). Unfortunately I'll never know for sure because the heat sink is obscuring the part number.~~ EDIT: It's actually a UCN4204B, which I can find no datasheet online for, so it is still a mystery chip.
